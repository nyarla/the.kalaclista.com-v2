<!doctype html>
<html lang="ja">
  <head prefix="og: http://ogp.me/ns# website: http://ogp.me/ns/website#">
    {{ partial "shared/meta.html.html" . }}
    {{ partial "home/meta.html.html" . }}
  </head>
  <body>
    {{ partial "shared/header.html.html" . }}

    <main id="home">
    {{ range $section := slice "posts" "echos" "notes" "bookmarks" }}
      <h1><a href="{{ absURL (printf "/%s/" $section)  }}">{{ index $.Site.Params.labels $section }}</a></h1>
      {{ range $data := first 5 (index $.Site.Data.feed $section).items }}
        {{ if (ne $section "bookmarks") }}
          <article class="summary">
            <a href="{{ $data.url }}">
              <h1>{{ $data.title }}</h1>
              <p>{{ (partial "functions/content.html.html" ($data.content_html | safeHTML) | unmarshal).summary }}</p>
            </a>
          </article>
        {{ else }}
        <article class="bookmark">
          <h1>
            <a href="{{ $data.external_link }}">{{ $data.title }}</a>
          </h1>
          <nav>
            {{ range $tag := sort (default slice $data.tags) }}
            <a href="{{ absURL (printf "/bookmarks/tags/%s/" $tag) }}">{{ $tag }}</a>
            {{ end }}
          </nav>
          <section class="content">
            {{ partial "functions/markup.html.html" ($data.content_html | safeHTML) }}
          </section>
        </article>
        {{ end }} 
      {{ end }}
       <p><a href="{{ absURL (printf "/%s/" $section) }}">{{ index $.Site.Params.labels $section }}をもっと見る</a></p>
    {{ end }}
    </main>
    {{ partial "shared/footer.html.html" . }}
  </body>
</html>
